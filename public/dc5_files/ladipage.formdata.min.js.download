LadiPageScriptV2.prototype.runOptionForm=function(t,e,i){var a,n=this,o=window.ladi("LADI_CAMP_TARGET_URL").get_cookie(),r=window.ladi("LADI_CAMP_CONFIG").get_cookie(),c=document.getElementsByClassName("ladi-form"),d=0,s=null,u=null,p=null,m=null,l=null,_=null,g=null,f=null,y=null,h=null,v=null,L=null,P=null,E=null,A=null,O=null,w=null,T=null,b=null,k=n.runtime.shopping,N=null,S=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],D=["name","email","phone","address","ward","district","state","country"],R=["email","phone"],C=n.copy(n.runtime.list_set_value_name_country).reverse(),I=function(t,e){var i="_capture_"+t,a=window.ladi(i).get_cookie(),o=!1,r=n.runtime.tmp["cookie_cache_otp_"+t];if(isEmptyLadiPage(a)&&isObjectLadiPage(r)&&!isEmptyLadiPage(r[i])&&(a=r[i],o=!0),isEmptyLadiPage(a)){a=e+"|"+n.runtime.ladipage_id+"|"+Date.now()+"|"+n.randomId();var c=new Date;c.setTime(c.getTime()+9e5),o?(r[i]=a,n.runtime.tmp["cookie_cache_otp_"+t]=r):window.ladi(i).set_cookie(a,c)}return a},F=function(t,e,i){var a=n.runtime.tmp["form_data_ladi_"+v];if(isObjectLadiPage(a))return!0;if(e&&isEmptyLadiPage(u[i]))return!1;var o=!0,r=t.getElementsByClassName("ladi-survey");for(f=0;f<r.length;f++){var c=n.findAncestor(r[f],"ladi-element");if(!isEmptyLadiPage(c)){var d=n.runtime.eventData[c.id];if(!isEmptyLadiPage(d)&&d["option.survey_setting.input_required"]&&!isEmptyLadiPage(d["option.survey_setting.input_name"])&&(!e||d["option.survey_setting.input_name"]==i)){var s=c.id,p=t.querySelector('.ladi-element.ladi-form-item-survey[data-name="'+d["option.survey_setting.input_name"]+'"]');isEmptyLadiPage(p)||(s=p.id);var m=window.ladi(s).value();if(isEmptyLadiPage(m)){o=!1;break}}}}var l=null;if(Array.from(document.querySelectorAll('.ladi-form-checkbox-box-item input[data-other="true"]:checked, .ladi-form-checkbox-box-item input[type="radio"][data-other="true"]:checked')).forEach(function(t){o&&isEmptyLadiPage(t.value)&&(o=!1,l=function(){var e=t.parentElement.getElementsByClassName("ladi-editing")[0];isEmptyLadiPage(e)||e.focus()})}),!o)return e||n.showMessage(n.const.LANG.FORM_INPUT_REQUIRED_ERROR,null,l),!1;var _=[];if(T.forEach(function(t){isEmptyLadiPage(u[t])&&_.push(t)}),e&&(_=_.only([i])),_.length>0)return e||n.showMessage(n.const.LANG.FORM_INPUT_REQUIRED_ERROR,null,function(){var e=t.querySelector('[name="'+_[0]+'"]');isEmptyLadiPage(e)||e.focus()}),!1;var g=!0,f=0,y=function(){var e=t.querySelector('[name="'+b[f].name+'"]');isEmptyLadiPage(e)||e.focus()};for(f=0;f<b.length;f++)if(!e||b[f].name==i){var h=u[b[f].name];if(!isEmptyLadiPage(h))try{if(!new RegExp("^"+b[f].pattern+"$",b[f].pattern_flag).test(h)){e||n.showMessage(b[f].title,null,y),g=!1;break}}catch(t){}}return g},x=function(t,e){u={},p={},m={},l={};for(var i=t.querySelectorAll(".ladi-element .ladi-form-item-container [name]"),a={},o=null,r=0;r<i.length;r++)o=i[r].getAttribute("name"),a[o]=parseInt(i[r].getAttribute("tabindex"))||0;var c=Object.keys(a).sort(function(t,e){return a[t]-a[e]});if(c.only(n.runtime.list_set_value_name_country).length==n.runtime.list_set_value_name_country.length)for(var d=0;d<c.length;d++){var s=n.runtime.list_set_value_name_country.indexOf(c[d]);-1!=s&&(c[d]=C[s])}for(var g=0;g<c.length;g++)u[c[g]]="";f=c;for(var y=0;y<i.length;y++){o=i[y].getAttribute("name"),i[y].required&&-1==T.indexOf(o)&&T.push(o);var h=null;if("INPUT"==i[y].tagName){h=i[y].getAttribute("type").trim().toLowerCase();var v=i[y].getAttribute("pattern"),L=i[y].getAttribute("title");if("email"==h?b.push({name:o,pattern:'(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))',pattern_flag:"gi",title:n.const.LANG.FORM_INPUT_EMAIL_REGEX}):isEmptyLadiPage(v)||b.push({name:o,pattern:v,title:isEmptyLadiPage(L)?n.const.LANG.FORM_INPUT_TEXT_REGEX:L}),"checkbox"==h){isArrayLadiPage(u[o])||(u[o]=[]),i[y].checked&&u[o].push(i[y].value);continue}if("radio"==h){i[y].checked&&(u[o]=i[y].value);continue}}if(u[o]=i[y].value,i[y].classList.contains("ladi-form-control-file")&&(u[o]=JSON.parse(i[y].getAttribute("data-path-file")||"[]"),l[o]=!0),"coupon"==o&&"INPUT"==i[y].tagName&&"text"==h&&"true"==i[y].getAttribute("data-replace-coupon")&&(u[o]=n.runtime.tmp.current_use_coupon||""),"INPUT"==i[y].tagName&&"date"==h&&!isEmptyLadiPage(u[o])){var P=i[y].getAttribute("date-format")||"dd-mm-yyyy",E=new Date(u[o]),A=P;A=(A=(A=(A=A.replaceAll("dd",(E.getDate()<10?"0":"")+E.getDate())).replaceAll("mm",(E.getMonth()+1<10?"0":"")+(E.getMonth()+1))).replaceAll("yyyy",E.getFullYear())).replaceAll("yy",E.getFullYear()-2e3),u[o]=A,p[o]=P}}e||D.forEach(function(t){isNullLadiPage(u[t])||n.setCookieDomains("_ladipage_"+t,u[t],365)}),_=n.runtime.tmp.convertFormDataObjectCountry(u)},M=function(t,e,a,c,m){var _=n.runtime.website_id,g={form_config_id:y,ladi_form_id:v,ladipage_id:n.runtime.ladipage_id,tracking_form:[],form_data:[],data_key:c};if(isEmptyLadiPage(_)||(g.website_id=_),a)g.status_send=n.const.STATUS_SEND.capture;else if(g.status_send=n.const.STATUS_SEND.sendform,k){var T=window.ladi("_checkout_token").get_cookie();isEmptyLadiPage(T)||(g.checkout_token=T)}if(isEmptyLadiPage(e.voucher_id)||(g.voucher_id=e.voucher_id),isEmptyLadiPage(e.voucher_code)||(g.voucher_code=e.voucher_code),!isEmptyLadiPage(L)){var b=L.getElementsByClassName("ladiflow-widget")[0];isEmptyLadiPage(b)||(isObjectLadiPage(g.options)||(g.options={}),g.options.ladiflow_trigger_id=b.getAttribute("ladiflow-trigger-id"),g.options.ladiflow_ref=b.getAttribute("ladiflow-ref"),g.options.ladiflow_page_id=b.getAttribute("page_id"),g.options.ladiflow_checkbox_user_ref=b.getAttribute("user_ref"),g.options.ladiflow_store_id=b.getAttribute("ladiflow-store-id"),d=1e3,s=function(){isObjectLadiPage(window.LadiFlow)&&isFunctionLadiPage(window.LadiFlow.resetWidgetCheckbox)&&window.LadiFlow.resetWidgetCheckbox(b.id)})}isEmptyLadiPage(P)||["option.sync_ladisales_form_account_id","option.sync_ladiflow_form_account_id","option.sync_ladishare_form_account_id","option.sync_ladichat_form_account_id"].forEach(function(t){isEmptyLadiPage(P[t])||(isObjectLadiPage(g.options)||(g.options={}),isArrayLadiPage(g.options.external_form_config_ids)||(g.options.external_form_config_ids=[]),g.options.external_form_config_ids.push(P[t]))}),e.isFormOtp&&!isEmptyLadiPage(h)&&(isObjectLadiPage(g.options)||(g.options={}),isObjectLadiPage(g.options.external_otp_config)||(g.options.external_otp_config={}),g.options.external_otp_config.otp_config_id=h),isObjectLadiPage(g.options)&&(g.options=JSON.stringify(g.options)),isEmptyLadiPage(E)||(g.total_revenue=E),isEmptyLadiPage(n.runtime.time_zone)||(g.time_zone=n.runtime.time_zone);var D=Object.keys(LadiFormApi);if((f=function(t){var e=[],i=0,a=["state","district","ward"];for(i=0;i<t.length&&!a.includes(t[i]);i++)e.push(t[i]);var n=Array.from(document.querySelectorAll("#"+v+" .ladi-form-control[data-select-index]")),o=Array.from(document.querySelectorAll("#"+v+' input.ladi-form-control[data-select-index][name="ward"]')),r=n.map(function(t){return(parseInt(t.getAttribute("data-select-index"))||0)+"|"+t.getAttribute("name")});for(r.sort(function(t,e){return parseInt(t.split("|")[0])-parseInt(e.split("|")[0])}),n=r.map(function(t){return t.split("|")[1]}),i=0;i<n.length;i++)e.push(n[i]);for(n.length>0&&e.push("country"),isEmptyLadiPage(o)||e.except(["ward"]),i=e.length;i<t.length;i++)e.push(t[i]);return e=e.unique(),e=JSON.stringify(e),e=JSON.parse(e)}(f)).forEach(function(t){var e=u[t];if(isArrayLadiPage(e)&&0==e.length&&(e=""),e=-1!=D.indexOf(t)?LadiFormApi[t]:e,"products"==t&&-1!=f.indexOf("quantity"))try{var i=e.split("|");if(2==i.length){var a=i[0].split(":");5==a.length&&(a[1]=u.quantity),i[0]=a.join(":")}e=i.join("|")}catch(t){}var n={name:t,value:e};l[t]&&(n.is_file=!0),isEmptyLadiPage(p[t])||(n.format=p[t]),g.form_data.push(n)}),(D=D.except(f)).forEach(function(t){g.form_data.push({name:t,value:LadiFormApi[t]})}),k){if(!isNullLadiPage(A)){g.form_data.push({name:"cart_products",value:A,is_ladipage:!0}),isEmptyLadiPage(n.runtime.tmp.add_to_cart_shipping_method_id)||g.form_data.push({name:"cart_shipping",value:n.runtime.tmp.add_to_cart_shipping_method_id+"|"+(n.runtime.tmp.add_to_cart_fee_shipping||0),is_ladipage:!0});var R=g.form_data.findIndex(function(t){return"coupon"==t.name});-1!=R&&(g.form_data[R].is_ladipage=!0)}isEmptyLadiPage(E)||g.form_data.push({name:"cart_revenue",value:E,is_ladipage:!0}),isEmptyLadiPage(n.runtime.tmp.current_use_coupon)||g.form_data.push({name:"cart_coupon_amount",value:n.runtime.tmp.add_to_cart_discount||0,is_ladipage:!0})}g.tracking_form.push({name:"url_page",value:window.location.href}),n.runtime.has_popupx&&g.tracking_form.push({name:"origin_url_page",value:n.runtime.tmp.popupx_origin_url}),S.forEach(function(t){var e=N[t];e=isNullLadiPage(e)?"":e,g.tracking_form.push({name:t,value:e})}),g.tracking_form.push({name:"variant_url",value:o}),g.tracking_form.push({name:"variant_content",value:n.generateVariantContentString(r,!0)}),isEmptyLadiPage(i)||g.tracking_form.push({name:n.const.REF_NAME,value:i}),n.runtime.tmp["form_data_ladi_tmp_"+v]=n.copy(g);var C=n.runtime.tmp["form_data_ladi_"+v];isObjectLadiPage(C)&&(g=n.copy(C)),isEmptyLadiPage(O)||(g.captcha_token=O,g.captcha_type=w);e.isFormOtp&&(e.isSetOtpId&&function(){var t="_otp_id_"+v,i=window.ladi(t).get_cookie(),a=!1,o=n.runtime.tmp["cookie_cache_otp_"+v];isEmptyLadiPage(i)&&isObjectLadiPage(o)&&!isEmptyLadiPage(o[t])&&(i=o[t],a=!0);var r=new Date,c=[];isEmptyLadiPage(i)?c=[n.randomId(),r.getTime(),1]:((c=i.split("|"))[1]=parseInt(c[1])||Date.now(),c[2]=parseInt(c[2])||1,e.isSendOtp||(c[2]+=1),c.splice(3)),c[2]<=1?g.otp_send=n.const.OTP_TYPE.send:g.otp_send=n.const.OTP_TYPE.resend,r.setTime(c[1]+9e5),i=c.join("|"),a?(o[t]=i,n.runtime.tmp["cookie_cache_otp_"+v]=o):window.ladi(t).set_cookie(i,r),c.splice(1),i=c.join("|"),g.otp_id=i}(),g.is_capture=e.isCapture,g.otp_type=n.const.OTP_TYPE.sms,g.status_send=n.const.STATUS_SEND.otp),e.isSendOtp&&(g.otp_code=e.otp_code,g.status_send=n.const.STATUS_SEND.sendform),isFunctionLadiPage(m)&&m(g)},q=function(t){t.reset();var e=t.getElementsByClassName("ladi-survey-option");for(Z=0;Z<e.length;Z++)e[Z].classList.remove("selected");var i=t.querySelectorAll(".ladi-element .ladi-form-item-container .ladi-form-checkbox-item input");for(Z=0;Z<i.length;Z++){var a=n.findAncestor(i[Z],"ladi-form-checkbox-item").querySelector("span");isEmptyLadiPage(a)||a.setAttribute("data-checked",i[Z].checked)}var o=n.findAncestor(t,"ladi-element");if(!isEmptyLadiPage(o)){for(var r=document.querySelectorAll('.ladi-form [data-submit-form-id="'+o.id+'"]'),c=0;c<r.length;c++){var d=n.findAncestor(r[c],"ladi-form");if(!isEmptyLadiPage(d)&&(d=n.findAncestor(d,"ladi-element"),!isEmptyLadiPage(d))){var s=d.querySelector(".ladi-form-remove-coupon");if(isEmptyLadiPage(s)){var u=d.querySelector('input[name="coupon"]');isEmptyLadiPage(u)||(u.value="",n.fireEvent(u,"change"))}else s.click()}}var p=document.getElementById(o.getAttribute("data-form-id-before"));isEmptyLadiPage(p)||o.id==p.id||(p=p.getElementsByClassName("ladi-form")[0],q(p))}for(var m=document.querySelectorAll('[data-combobox-type="delivery_method"]'),l=0;l<m.length;l++)m[l].hasAttribute("data-placeholder")&&(m[l].innerHTML='<option value="">'+m[l].getAttribute("data-placeholder")+"</option>"),m[l].setAttribute("data-selected","");for(var _=document.querySelectorAll(".ladi-google-recaptcha-checkbox[data-widget-id]"),g=0;g<_.length;g++){var f=_[g].getAttribute("data-widget-id");isEmptyLadiPage(f)||window.grecaptcha&&isObjectLadiPage(n.runtime.tmp.google_captcha)&&n.runtime.tmp.google_captcha.checkbox&&isFunctionLadiPage(window.grecaptcha.reset)&&window.grecaptcha.reset(f)}var y=document.querySelectorAll(".ladi-form .ladi-form-checkbox-box-item");for(g=0;g<y.length;g++)n.runFormItemOtherChange(y[g].getElementsByClassName("ladi-form-checkbox-item")[0],!0);n.runtime.tmp.add_to_cart_shipping_method_id=null},j=function(t,e,i,a){x(i,!1),F(i,!1,null)&&(M(0,e,!1,a,function(t){n.sendRequest("POST",n.const.API_FORM_DATA,JSON.stringify(t),!0,{"Content-Type":"application/json"})}),n.showMessage(n.const.LANG.FORM_SEND_DATA_NO_CONFIG),q(i))},U=function(){n.showMessage(n.const.LANG.FORM_CAPTCHA_ERROR)},Y=function(t,e){var i={},a=function(t){return"form_show_popup_default"==t.type&&(isEmptyLadiPage(t.text_thankyou_value)||(t.text_thankyou_value=n.convertDataReplaceStr(t.text_thankyou_value,!1,null,!1,g))),"form_redirect_url"==t.type&&(isEmptyLadiPage(t.redirect_url)||(t.redirect_url=window.ladi(t.redirect_url).encode_thankyou_url(),t.redirect_url=window.ladi(t.redirect_url).get_url(m,e,!1))),"form_open_app_mobile"==t.type&&(n.runtime.isBrowserDesktop||isEmptyLadiPage(t.app_link)?t.app_link="":(t.app_link=window.ladi(t.app_link).encode_thankyou_url(),t.app_link=n.convertDataReplaceStr(t.app_link,!0,null,!1,g))),t};try{i=JSON.parse(t["option.funnelx_config"])}catch(t){}i=isObjectLadiPage(i)?i:{},isArrayLadiPage(i.configs)&&i.configs.forEach(function(t,e){i.configs[e].actions=t.actions.map(a)}),isArrayLadiPage(i.default_actions)&&(i.default_actions=i.default_actions.map(a));var o=n.copy(g);LadiPageScript.runtime.tmp.runActionPopupX({ladipage_id:n.runtime.ladipage_id,form_data:o,funnelx_config:i,action:{type:"thankyou_form_funnelx"}})},G=function(t,e,i,a,o){if(_={},g={},f=[],T=[],b=[],x(t,i),F(t,i,a)){for(var r=t.querySelectorAll(".ladi-element .ladi-form-item-container [name]"),c={},d=null,s=0;s<r.length;s++)d=n.findAncestor(r[s],"ladi-element"),c[r[s].getAttribute("name")]=d.id;var p=e["option.form_setting"],m=Object.keys(c),l=function(e){var u=document.getElementById(e);if(!isEmptyLadiPage(u)){u.setAttribute("data-form-id-before",t.id);var p=n.runtime.eventData[u.id];if(!i||!isEmptyLadiPage(p)&&p["option.form_auto_capture"]){isFunctionLadiPage(o.getOtp)&&!isEmptyLadiPage(p)&&p["option.is_form_otp"]&&(isFunctionLadiPage(o.beforeRunOtp)&&o.beforeRunOtp(u),n.runtime.func_get_code_otp[u.id]=o.getOtp);var l=[];if(m.forEach(function(t){var e=window.ladi(c[t]).value();r=u.querySelectorAll('.ladi-element .ladi-form-item-container [name="'+t+'"]');var i=[];for(s=0;s<r.length;s++)d=n.findAncestor(r[s],"ladi-element"),i.push(d.id),t==a&&l.push(r[s]);for(i=i.unique(),s=0;s<i.length;s++)window.ladi(i[s]).value(e)}),i)for(s=0;s<l.length;s++)n.fireEvent(l[s],"focusout")}}};if((p.mapping_form_id||[]).forEach(l),!i){n.runtime.is_funnelx&&(n.runtime.tmp.multipleFormRunFormParent=l,H(),Y(e,!1));var y=e["option.data_event"];if(!isArrayLadiPage(y)){var h=n.copy(p);if(y=[],isObjectLadiPage(h)&&(h.type=h.event_type,h.value=h.event_value,h.is_hide_parent=h.event_is_hide_parent,h.change_index_type=h.event_change_index_type,h.change_index_number=h.event_change_index_number,!isEmptyLadiPage(h.value))){if(h.type!=n.const.DATA_ACTION_TYPE.section&&h.type!=n.const.DATA_ACTION_TYPE.popup||y.push({action_type:n.const.ACTION_TYPE.complete,type:h.type,action:h.value}),h.type==n.const.DATA_ACTION_TYPE.section&&h.is_hide_parent||h.type==n.const.DATA_ACTION_TYPE.popup){var v=n.findAncestor(t,"ladi-popup"),L=n.findAncestor(t,"ladi-section"),P=null;isEmptyLadiPage(v)?isEmptyLadiPage(L)||(P=L.id):P=(v=n.findAncestor(v,"ladi-element")).id,isEmptyLadiPage(P)||y.push({action_type:n.const.ACTION_TYPE.complete,type:n.const.DATA_ACTION_TYPE.hidden_show,hidden_ids:[P],show_ids:[]})}h.type==n.const.DATA_ACTION_TYPE.change_index&&y.push({action_type:n.const.ACTION_TYPE.complete,type:h.type,action:h.value,change_index_type:h.change_index_type,change_index_number:h.change_index_number})}}n.runtime.tmp.runDataEventNow(t,y,{action_type:n.const.ACTION_TYPE.complete})}o.isRunTracking&&n.runEventTracking(t.id,{is_form:!0,is_form_multiple:!0},u)}},H=function(){m=n.copy(u),g=n.copy(_),isObjectLadiPage(n.runtime.tmp.form_data_otp_current)&&(m=n.copy(n.runtime.tmp.form_data_otp_current)),Object.keys(n.runtime.replaceStr).forEach(function(t){m.hasOwnProperty(t)||(m[t]=n.runtime.replaceStr[t]),g.hasOwnProperty(t)||(g[t]=n.runtime.replaceStr[t])});var t=[];isEmptyLadiPage(i)||t.push({key:n.const.REF_NAME,value:i}),t.forEach(function(t){m.hasOwnProperty(t.key)||(m[t.key]=t.value),g.hasOwnProperty(t.key)||(g[t.key]=t.value)})},B=async function(e,i,a,o,r,c){if(i=isObjectLadiPage(i)?i:{},c=isObjectLadiPage(c)?c:{},N=n.getURLSearchParams(null,null,!1),d=0,s=null,u={},p={},m={},l={},_={},g={},f=[],y=null,h=null,v=null,L=null,P=null,E=null,A=null,O=i.captcha_token,isObjectLadiPage(n.runtime.tmp.google_captcha)&&(w=n.runtime.tmp.google_captcha.type,!a&&isEmptyLadiPage(O)&&i.hasOwnProperty("captcha_token")))U();else{T=[],b=[],k=n.findAncestor(e,"ladi-popup"),isEmptyLadiPage(k)?k=!1:(k=n.findAncestor(k,"ladi-element"),k=!isEmptyLadiPage(k)&&"POPUP_CHECKOUT"==k.id);var D=e.getElementsByClassName("ladi-form")[0];if(!isEmptyLadiPage(D)){var R=n.runtime.eventData[e.id];if(!isEmptyLadiPage(R)){if(R["option.is_add_to_cart"])return;y=R["option.form_config_id"],h=isObjectLadiPage(R["option.form_setting"])?R["option.form_setting"].otp_config_id:null,v=e.id,L=e,P=R,E=parseFloatLadiPage(R["option.form_purchase_value"])||0,k&&(E=n.getCartCheckoutPrice(E),A=n.getCartProducts())}var C=null,I=e.getAttribute("data-button-submit-other"),G=null,J=null;if(a){if(isEmptyLadiPage(o))return;if(x(D,a),!F(D,a,r))return;if(i.captcha&&!isEmptyLadiPage(R)&&R["option.form_captcha"]&&isObjectLadiPage(n.runtime.tmp.google_captcha)){if(window.grecaptcha)if(n.runtime.tmp.google_captcha.enterprise&&window.grecaptcha.enterprise)window.grecaptcha.enterprise.ready(function(){try{window.grecaptcha.enterprise.execute(n.runtime.tmp.google_captcha.api_key,{action:"submit"}).then(function(t){B(e,{captcha_token:t},a,o,r,c)})}catch(t){}});else if(n.runtime.tmp.google_captcha.checkbox)try{C=e.getElementsByClassName("ladi-google-recaptcha-checkbox")[0],isEmptyLadiPage(I)||(C=document.querySelector("#"+I+" .ladi-google-recaptcha-checkbox")),G=C.getAttribute("data-widget-id"),J=window.grecaptcha.getResponse(G),B(e,{captcha_token:J},a,o,r,c)}catch(t){}else window.grecaptcha.ready(function(){try{window.grecaptcha.execute(n.runtime.tmp.google_captcha.api_key,{action:"submit"}).then(function(t){B(e,{captcha_token:t},a,o,r,c)})}catch(t){}});return}M(0,c,a,o,function(t){var e=t.form_data.findIndex(function(t){return t.name==r}),i=-1!=e?t.form_data[e].value:null;!isEmptyLadiPage(n.runtime.tmp.capture_form_data_last[o+"_"+r])&&equalsLadiPage(n.runtime.tmp.capture_form_data_last[o+"_"+r],i)||(n.runtime.tmp.capture_form_data_last[o+"_"+r]=i,n.sendRequest("POST",n.const.API_FORM_DATA,JSON.stringify(t),!0,{"Content-Type":"application/json"}))})}else if(isEmptyLadiPage(R))j(0,c,D,o);else if(isNullLadiPage(n.runtime.tmp.form_sending)&&(n.runtime.tmp.form_sending={}),isNullLadiPage(n.runtime.tmp.form_button_headline)&&(n.runtime.tmp.form_button_headline={}),!n.runtime.tmp.form_sending[e.id]){var W=function(){n.runtime.tmp.form_sending[e.id]=!0;var t=D.querySelector(".ladi-button .ladi-headline");isNullLadiPage(n.runtime.tmp.form_button_headline[e.id])&&(n.runtime.tmp.form_button_headline[e.id]=t.innerHTML),c.isFormOtp||(t.innerHTML="● ● ●")},K=D.getElementsByClassName("ladi-button")[0];K=n.findAncestor(K,"ladi-element"),isEmptyLadiPage(I)||(K=document.getElementById(I));var Q=function(){delete n.runtime.tmp.form_sending[e.id],D.querySelector(".ladi-button .ladi-headline").innerHTML=n.runtime.tmp.form_button_headline[e.id]};if(isNullLadiPage(c.voucher_id)&&!isEmptyLadiPage(R)&&R["option.form_set_voucher_id"])return W(),void function(t){n.runtime.tmp.voucher_info={};var i={event:"getVoucher",voucher_id:R["option.form_set_voucher_id"],pixel_id:n.runtime.store_id,time_zone:n.runtime.time_zone,domain:window.location.host,url:window.location.href,customer:function(t){try{var i=e.querySelector(`.ladi-element .ladi-form-item input.ladi-form-control[name="${t}"]`);return i?i.value:""}catch(t){}return""}(R["option.form_customer_input_name"]),ladipage_id:n.runtime.ladipage_id};n.sendRequest("POST",n.const.API_ANALYTICS_EVENT,JSON.stringify(i),!0,{"Content-Type":"application/json"},function(e,i,a){if(a.readyState==XMLHttpRequest.DONE&&isFunctionLadiPage(t))try{var o=JSON.parse(e);n.runtime.tmp.voucher_info={voucher_id:o.data.id||"",voucher_code:o.data.voucher_code,message:o.message},t(n.runtime.tmp.voucher_info.voucher_id,n.runtime.tmp.voucher_info.voucher_code),R["option.form_voucher_show_error"]&&isObjectLadiPage(n.runtime.tmp.voucher_info)&&isEmptyLadiPage(n.runtime.tmp.voucher_info.voucher_code)&&!isEmptyLadiPage(n.runtime.tmp.voucher_info.message)&&n.showMessage(n.runtime.tmp.voucher_info.message)}catch(e){t("","")}})}(function(t,n){Q(),B(e,i,a,o,r,Object.assign(c,{voucher_id:t,voucher_code:n}))});if(i.captcha&&!isEmptyLadiPage(R)&&R["option.form_captcha"]&&isObjectLadiPage(n.runtime.tmp.google_captcha))if(window.grecaptcha)if(W(),n.runtime.tmp.google_captcha.enterprise&&window.grecaptcha.enterprise)window.grecaptcha.enterprise.ready(function(){try{window.grecaptcha.enterprise.execute(n.runtime.tmp.google_captcha.api_key,{action:"submit"}).then(function(t){Q(),B(e,{captcha_token:t},a,o,r,c)}).catch(function(){U(),Q()})}catch(t){U(),Q()}});else if(n.runtime.tmp.google_captcha.checkbox)try{C=e.getElementsByClassName("ladi-google-recaptcha-checkbox")[0],I=e.getAttribute("data-button-submit-other"),isEmptyLadiPage(I)||(C=document.querySelector("#"+I+" .ladi-google-recaptcha-checkbox")),G=C.getAttribute("data-widget-id"),J=window.grecaptcha.getResponse(G),Q(),B(e,{captcha_token:J},a,o,r,c)}catch(t){U(),Q()}else window.grecaptcha.ready(function(){try{window.grecaptcha.execute(n.runtime.tmp.google_captcha.api_key,{action:"submit"}).then(function(t){Q(),B(e,{captcha_token:t},a,o,r,c)}).catch(function(){U(),Q()})}catch(t){U(),Q()}});else n.showMessage(n.const.LANG.FORM_CAPTCHA_LOADING);else{var V=R["option.form_send_ladipage"],X=R["option.form_api_data"],z=R["option.thankyou_type"],Z=R["option.thankyou_value"],$=R["option.deeplink_value"],tt=R["option.form_auto_funnel"],et=R["option.form_thankyou_funnel"],it=function(){if(m=Object.assign(m,n.runtime.tmp.voucher_info),g=Object.assign(g,n.runtime.tmp.voucher_info),isObjectLadiPage(c)&&isFunctionLadiPage(c.callbackOtpShowThankYouDone)&&c.callbackOtpShowThankYouDone(),isFunctionLadiPage(s)&&s(),R["option.form_voucher_show_thankyou_when_error"]||!R["option.form_voucher_show_error"]||!isObjectLadiPage(n.runtime.tmp.voucher_info)||!isEmptyLadiPage(n.runtime.tmp.voucher_info.voucher_code)||isEmptyLadiPage(n.runtime.tmp.voucher_info.message))if(n.runtime.is_funnelx)Y(R,tt);else{var i=!1;if(n.runtime.has_popupx&&n.runtime.tmp.popupx_is_inline)i=!0;else if(z!=n.const.FORM_THANKYOU_TYPE.url){var a=n.findAncestor(e,"ladi-popup");isEmptyLadiPage(a)||(a=n.findAncestor(a,"ladi-element"),n.runRemovePopup(a.id,t))}var o=0;if(!n.runtime.isBrowserDesktop&&!isEmptyLadiPage($)){o=1e3,$=window.ladi($).encode_thankyou_url();var r=n.convertDataReplaceStr($,!0,null,!1,g);window.ladi(r).open_url()}var d=window.ladi("LADI_FUNNEL_NEXT_URL").get_cookie();if(!et||isEmptyLadiPage(d)){if(z==n.const.FORM_THANKYOU_TYPE.default&&(isEmptyLadiPage(Z)||n.showMessage(Z,g)),z==n.const.FORM_THANKYOU_TYPE.popup&&(tt&&n.setDataReplaceElement(!1,!1,g,Z),window.ladi(Z).show(!1,{formThankyouPopupXInline:i})),z==n.const.FORM_THANKYOU_TYPE.url&&!isEmptyLadiPage(Z)){Z=window.ladi(Z).encode_thankyou_url();var u=window.ladi(Z).get_url(m,tt,!1);n.runTimeout(function(){window.ladi(u).open_url()},o)}}else{d=window.ladi(d).encode_thankyou_url();var p=window.ladi(d).get_url(m,tt,!1);n.runTimeout(function(){window.ladi(p).open_url()},o)}}},at=function(){isFunctionLadiPage(window.ladipage_before_thankyou)?window.ladipage_before_thankyou(e,it):it()};if(R["option.only_facebook_widget"]){if(isObjectLadiPage(window.LadiFlow)&&isFunctionLadiPage(window.LadiFlow.confirmCheckbox))for(var nt=e.getElementsByClassName("ladiflow-widget"),ot=0;ot<nt.length;ot++)window.LadiFlow.confirmCheckbox(nt[ot].id);return n.runEventTracking(e.id,{is_form:!0,is_facebook_widget:!0},u),void at()}if(isEmptyLadiPage(y)&&isEmptyLadiPage(R["option.sync_ladisales_form_account_id"])&&isEmptyLadiPage(R["option.sync_ladiflow_form_account_id"])&&isEmptyLadiPage(R["option.sync_ladishare_form_account_id"])&&isEmptyLadiPage(R["option.sync_ladichat_form_account_id"]))j(0,c,D,o);else if(x(D,a),F(D,a,r)){var rt=0,ct=0,dt=null,st=[],ut=!1,pt=!1,mt=!0,lt=function(t){t&&q(D),Q()},_t=function(t){if(-1!=[n.const.FORM_CONFIG_TYPE.sapo,n.const.FORM_CONFIG_TYPE.shopify,n.const.FORM_CONFIG_TYPE.haravan,n.const.FORM_CONFIG_TYPE.wordpress].indexOf(n.runtime.shopping_product_type)&&n.runtime.tmp.cart.length>0){var e=!1;-1!=[n.const.FORM_CONFIG_TYPE.haravan,n.const.FORM_CONFIG_TYPE.wordpress].indexOf(n.runtime.shopping_product_type)&&(e=!0);var i=n.runtime.tmp.cart[0];return i=JSON.stringify(i),i=encodeURIComponent(i),void n.removeAddToCartProduct(i,!1,e,function(e){e?_t(t):isFunctionLadiPage(t)&&t()})}-1!=[n.const.FORM_CONFIG_TYPE.ladisales].indexOf(n.runtime.shopping_product_type)&&(window.ladi("_cart_token").delete_cookie(),window.ladi("_checkout_token").delete_cookie(),n.createCartData()),isFunctionLadiPage(t)&&t()},gt=function(t,i,a,o){if(a.readyState==XMLHttpRequest.DONE){var r={};try{r=JSON.parse(t)}catch(t){}r=isObjectLadiPage(r)?r:{},o==n.const.API_FORM_DATA?200==r.code?rt++:(1!=r.code||isEmptyLadiPage(r.message)||(dt=r.message),ct++,mt=!1):200==i||201==i?rt++:n.getElementAHref(o).host==n.const.DOMAIN_GOOGLE_DOCS?rt++:ct++,rt+ct==st.length&&(mt&&!ut&&rt>=1?(ut=!0,c.isResendOtp||(n.runtime.tmp.form_data_current=u),isFunctionLadiPage(c.callbackOtp)&&c.callbackOtp(!0),isObjectLadiPage(c)&&isFunctionLadiPage(c.callbackThankyou)?(Q(),c.callbackThankyou(c,function(){_t(function(){lt(!0),n.runtime.tmp.current_use_coupon=null})})):(H(),function(t,e,i){var a=null,o=!1,r=function(t,e){o||(isFunctionLadiPage(i)&&i(t,e),n.removeTimeout(a),o=!0)};a=n.runTimeout(r,3e3),n.runtime.tmp.runTrackingAnalytics("FormSubmit",{ladi_form_id:t,total_revenue:e},r)}(e.id,E,function(t,i){n.runEventTracking(e.id,{is_form:!0,event:{target:K}},u),window.ladi("_capture_"+e.id).delete_cookie(),isObjectLadiPage(c)&&isFunctionLadiPage(c.callbackOtpDone)&&c.callbackOtpDone(),_t(function(){n.runTimeout(function(){lt(!0),n.runtime.tmp.current_use_coupon=null,at()},500)})}))):!pt&&ct>=1&&(isFunctionLadiPage(c.callbackOtp)&&c.callbackOtp(!1),pt=!0,n.showMessage(dt||n.const.LANG.REQUEST_SEND_ERROR),lt(!1)))}},ft=function(t){st.push({url:n.const.API_FORM_DATA,data:JSON.stringify(t),async:!0,headers:{"Content-Type":"application/json"},callback:gt})};V&&M(0,c,a,o,ft),isArrayLadiPage(X)&&X.forEach(function(t){if(!isEmptyLadiPage(t.api_url)&&isArrayLadiPage(t.custom_fields)){var e=n.getElementAHref(t.api_url).host==n.const.DOMAIN_GOOGLE_DOCS,i={},a=null,o=null,r=null,c=null;t.custom_fields.forEach(function(t){if(k&&("cart_products"==t.ladi_name&&(a=t.name),"cart_revenue"==t.ladi_name&&(o=t.name),"cart_shipping"==t.ladi_name&&(r=t.name),"cart_coupon_amount"==t.ladi_name&&(c=t.name)),!l[t.ladi_name]){var e=_[t.ladi_name];isNullLadiPage(e)||(isArrayLadiPage(e)?0==e.length?i[t.name]="":i[t.name]=JSON.stringify(e):i[t.name]=e)}}),isEmptyLadiPage(a)||isNullLadiPage(A)||(i[a]=JSON.stringify(A)),isEmptyLadiPage(o)||isNullLadiPage(E)||(i[o]=E),isEmptyLadiPage(r)||isNullLadiPage(n.runtime.tmp.add_to_cart_shipping_method_id)||(i[r]=n.runtime.tmp.add_to_cart_shipping_method_id+"|"+(n.runtime.tmp.add_to_cart_fee_shipping||0)),isEmptyLadiPage(c)||isEmptyLadiPage(n.runtime.tmp.current_use_coupon)||(i[c]=n.runtime.tmp.add_to_cart_discount||0);var d={};if(!isEmptyLadiPage(t.api_request_header))try{var s=JSON.parse(t.api_request_header);Object.keys(s).forEach(function(t){d[t]=s[t]})}catch(t){}if(!e)i.link=window.location.href,n.runtime.has_popupx&&(i.origin_link=n.runtime.tmp.popupx_origin_url),Object.keys(LadiFormApi).forEach(function(t){i[t]=LadiFormApi[t]}),S.forEach(function(t){var e=N[t];isNullLadiPage(e)||(i[t]=e)});var u=null,p=t.content_type||n.const.CONTENT_TYPE.form_urlencoded;if(p==n.const.CONTENT_TYPE.form_urlencoded&&(d["Content-Type"]="application/x-www-form-urlencoded",u=Object.keys(i).reduce(function(t,e){return t.push(e+"="+encodeURIComponent(i[e])),t},[]).join("&")),p==n.const.CONTENT_TYPE.json&&(d["Content-Type"]="application/json",u=JSON.stringify(i)),p==n.const.CONTENT_TYPE.form_data)u=new FormData,Object.keys(i).forEach(function(t){u.append(t,i[t])});st.push({url:t.api_url,data:u,async:!0,headers:d,callback:gt})}});(st.length>0||!V)&&W(),n.runTimeout(function(){0==st.length&&(V?j(0,c,D,o):M(0,c,a,o,ft)),st.forEach(function(t){n.sendRequest("POST",t.url,t.data,t.async,t.headers,t.callback)})},d)}}}}}},J=function(t){var e=n.findAncestor(t.target,"ladi-element");if(!isEmptyLadiPage(e))for(var i=e.querySelectorAll('[type="checkbox"]'),a=0;a<i.length;a++)i[a].removeAttribute("required")},W=function(t){var e=n.findAncestor(t.target,"ladi-element");if(!isEmptyLadiPage(e)){var a=null;if((!isArrayLadiPage(n.runtime.tmp.cart)||n.runtime.tmp.cart.length<=0)&&(a=n.findAncestor(e,["ladi-popup","ladi-element"]),!isEmptyLadiPage(a)&&"POPUP_CHECKOUT"==a.id))return n.showMessage(n.const.LANG.ADD_TO_CART_NO_CART),!1;delete n.runtime.tmp.form_data_otp_current,n.setEventDataFormDynamic(e.id);var o=n.runtime.eventData[e.id];if(isObjectLadiPage(o)&&o["option.is_form_otp"])return!1;for(var r=e.querySelectorAll('[ladi-checkbox-required="true"]'),c=-1,d=0;d<r.length;d++)if(0==r[d].querySelectorAll('[type="checkbox"]:checked').length){c=d;break}if(-1==c){var s=function(t){var i=!1,a=null;isEmptyLadiPage(o["option.form_config_id"])||((o["option.form_auto_capture"]||t.isFormOtp)&&(a=I(e.id,o["option.form_config_id"])),o["option.form_auto_capture"]&&(i=!0));var n={captcha:!0};(t.isResendOtp||t.isSendOtp)&&(n.captcha=!1),t.isFormOtp&&(t.isCapture=i),B(e,n,!1,a,null,t)},p=function(t){window.ladi("_capture_"+e.id).delete_cookie(),window.ladi("_otp_id_"+e.id).delete_cookie();var i=[];isObjectLadiPage(o["option.form_setting"])&&(i=o["option.form_setting"].mapping_form_id||[]),i.forEach(function(e){window.ladi("_otp_time_"+e).delete_cookie(),t&&delete n.runtime.tmp["cookie_cache_otp_"+e]}),t&&(delete n.runtime.tmp["cookie_cache_otp_"+e.id],delete n.runtime.tmp["form_data_ladi_"+e.id],delete n.runtime.tmp["form_data_ladi_tmp_"+e.id])},m=function(t){n.runtime.tmp.form_data_otp_current=n.runtime.tmp.form_data_current;var e=t.getElementsByClassName("ladi-form")[0];a=n.findAncestor(t,["ladi-popup","ladi-element"]);var i=function(){var i=t.getAttribute("data-form-id-before");delete n.runtime.func_get_code_otp[t.id],delete n.runtime.tmp["cookie_cache_otp_"+t.id],delete n.runtime.tmp["cookie_cache_otp_"+i],delete n.runtime.tmp["form_data_ladi_"+i],delete n.runtime.tmp["form_data_ladi_tmp_"+i],window.ladi("_otp_time_"+t.id).delete_cookie(),window.ladi("_otp_id_"+i).delete_cookie(),t.removeAttribute("data-form-id-before"),e.onsubmit=function(){return!1}},o=function(){isEmptyLadiPage(a)||window.ladi(a.id).hide(),e.reset()};e.onsubmit=function(){var e=t.querySelector('input[name="otp"]');return isEmptyLadiPage(e)||(e=e.value.trim(),s({isFormOtp:!0,isSetOtpId:!0,isSendOtp:!0,otp_code:e,callbackOtpDone:i,callbackOtpShowThankYouDone:o})),!1}},l=function(t,e){s({isFormOtp:!0,isSetOtpId:!0,isResendOtp:t,callbackOtp:e,callbackThankyou:y})},y=function(t,i){t.isFormOtp&&!t.isResendOtp&&function(){var t={};t["_capture_"+e.id]=null,t["_otp_id_"+e.id]=null;var i=Object.keys(t);i.forEach(function(e){t[e]=window.ladi(e).get_cookie()}),n.runtime.tmp["cookie_cache_otp_"+e.id]=t;var a=[];isObjectLadiPage(o["option.form_setting"])&&(a=o["option.form_setting"].mapping_form_id||[]),a.forEach(function(e){(t={})["_otp_time_"+e]=null,(i=Object.keys(t)).forEach(function(e){t[e]=window.ladi(e).get_cookie()}),n.runtime.tmp["cookie_cache_otp_"+e]=t}),n.runtime.tmp["form_data_ladi_"+e.id]=n.runtime.tmp["form_data_ladi_tmp_"+e.id]}(),p(!1),G(e,o,!1,null,{isRunTracking:!1,getOtp:l,beforeRunOtp:m}),isFunctionLadiPage(i)&&i()};if(isObjectLadiPage(o)&&o["option.is_form_login"])!function(t,e){var i=t.querySelector('input[name="access_key"]');if(!isEmptyLadiPage(i)&&!isEmptyLadiPage(i.value)){for(var a=[],o=0,r=1;r<=50;r++){var c=window.ladi("_login_token_"+r).get_cookie();0==o&&isEmptyLadiPage(c)&&(o=r),a.push(c)}if(0==o){for(r=1;r<=50;r++)window.ladi("_login_token_"+r).delete_cookie();a=[],o=1}n.sendRequest("POST",n.const.API_ACCESS_KEY_LOGIN,JSON.stringify({tokens:a.removeSpace(),url:window.location.href,code:i.value.toUpperCase()}),!0,{"Content-Type":"application/json"},function(t,e,i,r){if(i.readyState==XMLHttpRequest.DONE){var c={},d=n.const.LANG.FORM_LOGIN_SEND_ERROR;try{if(200==(c=JSON.parse(t)).code){var s=a.findIndex(function(t){return t==c.data.token});-1!=s&&(o=s+1),window.ladi("_login_token_"+o).set_cookie(c.data.token,7);var u=n.getElementAHref(c.data.url,!0),p=window.location.search;return(p.startsWith("?")||p.startsWith("&"))&&(p=p.substring(1)),isEmptyLadiPage(p)||(u.search=u.search+(isEmptyLadiPage(u.search)?"?":"&")+p),void window.ladi(u.href).open_url()}d=c.message||d}catch(t){}n.showMessage(d)}})}}(e);else if(isObjectLadiPage(o)&&isObjectLadiPage(o["option.form_setting"])&&o["option.form_setting"].is_multiple)o["option.form_setting"].is_multiple_otp?(p(!0),l(!1,function(t){if(t){var e=[];isObjectLadiPage(o["option.form_setting"])&&(e=o["option.form_setting"].mapping_form_id||[]),e.forEach(function(t){var e=document.getElementById(t);if(!isEmptyLadiPage(e)){var i=e.querySelector(".ladi-form-item .button-get-code");isEmptyLadiPage(i)||(e.setAttribute("data-start-countdown-otp",!0),i.click())}})}})):G(e,o,!1,null,{isRunTracking:!0});else{if(n.runtime.shopping_product_type==n.const.FORM_CONFIG_TYPE.ladisales&&!isNullLadiPage(n.runtime.shopping_config_checkout_id)){a=n.findAncestor(e,"ladi-popup");if(!isEmptyLadiPage(a)&&(a=n.findAncestor(a,"ladi-element"),!isEmptyLadiPage(a)&&"POPUP_CHECKOUT"==a.id))return function(t){var e=window.ladi("_cart_token").get_cookie(),a=window.ladi("_checkout_token").get_cookie();_={},g={},f=[],T=[],b=[],x(t,!1);var o=u.email,r=u.phone;if(isEmptyLadiPage(e)||isEmptyLadiPage(a))n.showMessage(n.const.LANG.FORM_INPUT_REQUIRED_ERROR);else if(isEmptyLadiPage(o)&&isEmptyLadiPage(r))n.showMessage(n.const.LANG.FORM_INPUT_REQUIRED_ERROR);else{var c=u.name,d=u.address,s=u.message,p=u.country||"";p=p.split(":")[0];var m=u.state||"";m=m.split(":")[0];var l=u.district||"";l=l.split(":")[0];var y=u.ward||"";y=y.split(":")[0];var h=u.coupon,v=n.runtime.tmp.add_to_cart_shipping_method_id,L=n.getLadiSaleCheckoutCartProducts(),P={cart_token:e,checkout_token:a,discount_code:h,customer_first_name:c,customer_email:o,customer_phone:r,customer_address:d,customer_note:s,customer_country_code:p,customer_state_id:m,customer_district_id:l,customer_ward_id:y,shipping_method_id:v,shipping_first_name:c,shipping_address:d,shipping_phone:r,shipping_email:o,shipping_country_code:p,shipping_state_id:m,shipping_district_id:l,shipping_ward_id:y,shipping_note:s,checkout_config_id:n.runtime.shopping_config_checkout_id,is_export_invoice:0,is_generate_url:!0,variants:L,source:"LADIPAGE",utm:{url_page:window.location.href}};N=n.getURLSearchParams(null,null,!1),S.forEach(function(t){P.utm[t]=isNullLadiPage(N[t])?"":N[t]}),isNullLadiPage(N[n.const.LADIFLOW_DATA_KEY_NAME])||(P.utm[n.const.LADIFLOW_DATA_KEY_NAME]=N[n.const.LADIFLOW_DATA_KEY_NAME]),n.runtime.has_popupx&&(P.utm.origin_url_page=n.runtime.tmp.popupx_origin_url),isEmptyLadiPage(i)||(P.utm[n.const.REF_NAME]=i),P.custom_fields={};var E=Object.keys(u);(E=E.except(["name","email","phone","address","country","state","district","ward","message","coupon"])).forEach(function(t){P.custom_fields[t]=u[t]}),n.sendRequest("POST",n.const.API_LADISALE_CHECKOUT_CREATE,JSON.stringify(P),!0,{"Content-Type":"application/json"},function(t,e,i){if(i.readyState==XMLHttpRequest.DONE){if(200==e)try{var a=JSON.parse(t);if(200==a.code&&isObjectLadiPage(a.data)&&!isEmptyLadiPage(a.data.url)){var o=window.ladi(a.data.url).get_url(),r=n.getElementAHref(o,!0),c=n.getURLSearchParams(r.search,null,!1);return isEmptyLadiPage(n.runtime.shopping_config_checkout_id)||(c.checkout_config_id=n.runtime.shopping_config_checkout_id),c.ladi_redirect_url=window.location.href,c=Object.keys(c).reduce(function(t,e){return t.push(e+"="+encodeURIComponent(c[e])),t},[]).join("&"),r.search=c,o=r.href,void window.ladi(o).open_url()}if(!isEmptyLadiPage(a.message))return void n.showMessage(a.message)}catch(t){}n.showMessage(n.const.LANG.REQUEST_SEND_ERROR)}})}}(e),!1}s({isFormOtp:!1})}}else{var h=r[c].querySelectorAll('[type="checkbox"]');if(h.length>0){h[0].setAttribute("required","required");for(var v=0;v<h.length;v++)h[v].removeEventListener("change",J),h[v].addEventListener("change",J);e.querySelector(".ladi-form").reportValidity()}}}return!1},K=function(t,e,i,a){var o=n.findAncestor(t.target,"ladi-form");if(!isEmptyLadiPage(o)){var r=n.findAncestor(t.target,"ladi-button");r=n.findAncestor(r||t.target,"ladi-element");var c=n.findAncestor(o,"ladi-element");if(!(isEmptyLadiPage(c)||(i=e?i:n.runtime.eventData[c.id],isEmptyLadiPage(i)||!i["option.is_buy_now"]&&!i["option.is_add_to_cart"]||isEmptyLadiPage(i["option.product_type"])||isEmptyLadiPage(i["option.product_id"])))){var d=function(){var o=n.generateVariantProduct(i,!1,null,null,null,null,!0,!0,d);if(isEmptyLadiPage(o)||isEmptyLadiPage(o.store_info)||isEmptyLadiPage(o.product))isEmptyLadiPage(n.runtime.tmp.timeout_product_info[i["option.product_type"]][i["option.product_id"]])&&n.showMessage(n.const.LANG.ADD_TO_CART_NO_PRODUCT,{name:n.getMessageNameProduct()});else{var s=-1,u=null;if(e){var p=c.querySelector('[data-variant="true"]');u=n.getProductVariantId(p,o.product),isEmptyLadiPage(u)||(s=o.product.variants.findIndex(function(t){return t.product_variant_id==u}))}else s=n.getProductVariantIndex(c.id,i);if(-1!=s){var m=o.product.variants[s].product_id;u=o.product.variants[s].product_variant_id;var l=o.product.name,_=o.product.variants[s].title,g=o.product.variants[s].price,f=o.product.variants[s].quantity,y=o.product.variants[s].quantity_stock;f=isNullLadiPage(y)?f:y;var h=isEmptyLadiPage(o.product.variants[s].src)?"":o.product.variants[s].src;h=isEmptyLadiPage(h)&&isObjectLadiPage(o.product.image)?o.product.image.src:h,isEmptyLadiPage(h)||!isStringLadiPage(h)||h.startsWith("http://")||h.startsWith("https://")||h.startsWith("//")||(h="https://"+n.const.STATIC_W_DOMAIN+"/"+h);if(0==o.product.select_many_service&&isArrayLadiPage(n.runtime.tmp.cart)&&-1!=n.runtime.tmp.cart.findIndex(function(t){return t.product_id==m&&t.product_variant_id!=u&&t.quantity>0}))n.showMessage(n.const.LANG.ADD_TO_CART_PRODUCT_ONLY_ONE,{name:n.getMessageNameProduct(o.product.variants[s])});else{var v=n.runtime.tmp.cart.findIndex(function(t){return t.product_variant_id==u}),L=!1;if(-1==v){L=!0;var P={store_id:o.store_info.id,product_id:m,product_variant_id:u,name:l,title:_,price:g,image:h,quantity:0,min_buy:o.product.variants[s].min_buy,max_buy:o.product.variants[s].max_buy,inventory_checked:o.product.variants[s].inventory_checked,available_quantity:f,currency:o.store_info.currency,product_type:o.product.variants[s].product_type,package_quantity:o.product.variants[s].package_quantity};isObjectLadiPage(P.currency)&&!isEmptyLadiPage(P.currency.code)&&(P.currency.symbol=n.formatCurrency(null,P.currency.code,!1,!0)),n.runtime.tmp.cart.push(P),v=n.runtime.tmp.cart.length-1}var E=c.querySelector('input[name="quantity"]');if(isEmptyLadiPage(E)||isEmptyLadiPage(E.value))n.showMessage(n.const.LANG.ADD_TO_CART_QUANTITY_REQUIRED);else{var A=parseInt(E.value)||0;if(A<=0)return void n.showMessage(n.const.LANG.ADD_TO_CART_QUANTITY_REQUIRED);var O=null,w=1;w=o.product.variants[s].min_buy||w;var T=o.product.variants[s].max_buy;w>n.runtime.tmp.cart[v].quantity+A&&(A=w-n.runtime.tmp.cart[v].quantity);var b=!1;if(!isEmptyLadiPage(T)&&n.runtime.tmp.cart[v].quantity+A>T&&(A=T-n.runtime.tmp.cart[v].quantity)<=0&&(b=!0,O=T),1==o.product.variants[s].inventory_checked){if(w>f)return void n.showMessage(n.const.LANG.ADD_TO_CART_NO_QUANTITY,{name:n.getMessageNameProduct(o.product.variants[s],!0)});n.runtime.tmp.cart[v].quantity+A>f&&(A=f-n.runtime.tmp.cart[v].quantity,f>0&&(b=!0,(isEmptyLadiPage(O)||O>f)&&(O=f)))}if(b||A<=0&&f>0)n.showMessage(n.const.LANG.ADD_TO_CART_MAX_QUANTITY,{max:O,name:n.getMessageNameProduct(o.product.variants[s])},function(){var e=t.target;e=n.findAncestor(e,"ladi-button"),isEmptyLadiPage(e)||(e=n.findAncestor(e,"ladi-element"));var i=n.runtime.eventData[e.id];if(!isEmptyLadiPage(i)){var a=i["option.data_event"];if(!isArrayLadiPage(a)&&(a=[],isObjectLadiPage(i["option.data_action"]))){var o=n.copy(i["option.data_action"]);o.action_type=n.const.ACTION_TYPE.action,a.push(o)}a.forEach(function(t){t.action_type==n.const.ACTION_TYPE.action&&(t.type==n.const.DATA_ACTION_TYPE.popup_cart&&window.ladi("POPUP_CART").show(),t.type==n.const.DATA_ACTION_TYPE.popup_checkout&&(n.runtime.shopping_third_party?n.getThirdPartyCheckoutUrl(!0,null,{event:{target:r}}):window.ladi("POPUP_CHECKOUT").show(!1,{event:{target:r}})))})}});else if(A>0){var k=!isEmptyLadiPage(o.product.variants[s].start_date)&&new Date(o.product.variants[s].start_date).getTime()>Date.now(),N=!isEmptyLadiPage(o.product.variants[s].end_date)&&new Date(o.product.variants[s].end_date).getTime()<Date.now();if(k)n.showMessage(n.const.LANG.ADD_TO_CART_PRODUCT_BEFORE_START_DATE,{name:n.getMessageNameProduct(o.product.variants[s])});else if(N)n.showMessage(n.const.LANG.ADD_TO_CART_PRODUCT_AFTER_END_DATE,{name:n.getMessageNameProduct(o.product.variants[s])});else{var S=function(){n.runtime.tmp.cart[v].quantity+=A;var t={product_id:m,product_variant_id:u,quantity:A};t.product_type=n.runtime.tmp.cart[v].product_type,t.package_quantity=n.runtime.tmp.cart[v].package_quantity;var e=isObjectLadiPage(n.runtime.tmp.cart[v].currency)&&!isEmptyLadiPage(n.runtime.tmp.cart[v].currency.code)?n.runtime.tmp.cart[v].currency.code:n.runtime.currency,i=n.runtime.tmp.cart[v].price;n.addCartCookie(o.store_info.id,t,function(){isFunctionLadiPage(a)&&a();var t=document.getElementsByClassName("ladi-form-remove-coupon")[0];isEmptyLadiPage(t)||t.click(),n.updateCartPromotion(),n.runEventTracking(null,{cart_quantity:A,cart_currency:e,cart_value:i,is_form:!1,is_add_to_cart:!0,is_custom:!0,event:{target:r}})},function(t){n.runtime.tmp.cart[v].quantity-=A,L&&n.runtime.tmp.cart.splice(v,1),n.showMessage(t.message)},function(){LadiPageShopping.push(function(){n.runtime.tmp.generateCart()}),LadiPageShopping.push(function(){n.changeTotalPriceCart()}),n.runtime.tmp.is_click_add_to_cart=!1,0==n.runtime.tmp.cart.length&&-1!=[n.const.FORM_CONFIG_TYPE.ladisales].indexOf(n.runtime.shopping_product_type)&&(window.ladi("_cart_token").delete_cookie(),window.ladi("_checkout_token").delete_cookie()),n.runResizeAll()})};if(isEmptyLadiPage(window.ladi("_cart_token").get_cookie()))if(n.runtime.tmp.is_click_add_to_cart){var D=function(){n.runTimeout(function(){if(n.runtime.tmp.is_click_add_to_cart)return D();d()},100)};D()}else n.runtime.tmp.is_click_add_to_cart=!0,S();else S()}}else f<=0&&n.showMessage(n.const.LANG.ADD_TO_CART_NO_QUANTITY,{name:n.getMessageNameProduct(o.product.variants[s],!0)})}}}else n.showMessage(n.const.LANG.ADD_TO_CART_PRODUCT_REQUIRED,{name:n.getMessageNameProduct(o.product.variants[s])})}};LadiPageShopping.push(function(){d()})}}},Q=function(t){K(t,!1,null,function(){var e=n.findAncestor(t.target,"ladi-button");e=n.findAncestor(e||t.target,"ladi-element");var i=n.runtime.eventData[e.id];if(!isEmptyLadiPage(i)){var a=i["option.data_event"];if(!isArrayLadiPage(a)&&(a=[],isObjectLadiPage(i["option.data_action"]))){var o=n.copy(i["option.data_action"]);o.action_type=n.const.ACTION_TYPE.action,a.push(o)}a.forEach(function(t){if(t.action_type==n.const.ACTION_TYPE.action){var i=null;t.type==n.const.DATA_ACTION_TYPE.popup_cart&&(i="POPUP_CART"),t.type==n.const.DATA_ACTION_TYPE.popup_checkout&&(i="POPUP_CHECKOUT"),t.type==n.const.DATA_ACTION_TYPE.popup_checkout&&n.runtime.shopping_third_party?n.getThirdPartyCheckoutUrl(!0,null,{event:{target:e}}):isEmptyLadiPage(i)||window.ladi(i).show(!1,{event:{target:e}})}}),n.runEventTracking(e.id,{is_form:!1})}})},V=function(t){var e=n.findAncestor(t.target,"ladi-form");isEmptyLadiPage(e)||(e=n.findAncestor(e,"ladi-element"),isEmptyLadiPage(e)||window.ladi(e.id).submit())},X=function(t){var e=n.findAncestor(t.target,"ladi-form");if(!isEmptyLadiPage(e)){var i=n.findAncestor(e,"ladi-element");if(!isEmptyLadiPage(i)){n.setEventDataFormDynamic(i.id);var a=n.runtime.eventData[i.id];if(!isEmptyLadiPage(a)){var o={};if(isObjectLadiPage(a["option.form_setting"])&&a["option.form_setting"].is_multiple){if(!a["option.form_setting"].is_multiple_otp)return void G(i,a,!0,t.target.getAttribute("name"),{isRunTracking:!0});o.isFormOtp=!0,o.isCapture=!0}if(a["option.form_auto_capture"]&&!isEmptyLadiPage(a["option.form_config_id"])){var r=I(i.id,a["option.form_config_id"]);B(i,{captcha:!0},!0,r,t.target.getAttribute("name"),o)}}}}},z={};D.forEach(function(t){z[t]=window.ladi("_ladipage_"+t).get_cookie(),isEmptyLadiPage(e[t])||(z[t]=e[t])}),a=n.runtime.tmp.convertFormDataObjectCountry(z);var Z=0,$=!1,tt=function(t){for(var e=c[Z].querySelectorAll('.ladi-element .ladi-form-item-container [name="'+t+'"]'),i=null,o=0;o<e.length;o++){var r=z[t];if(!isEmptyLadiPage(r)&&"none"!=getComputedStyle(e[o]).display)if("true"!=e[o].getAttribute("data-is-select-country")&&(r=a[t]),"SELECT"==e[o].tagName)e[o].querySelectorAll('option[value="'+r+'"]').length>0&&(e[o].value=r,$&&n.fireEvent(e[o],"change"));else{if("country"==t&&"true"==e[o].getAttribute("data-is-select-country"))continue;"INPUT"==e[o].tagName&&"true"==e[o].getAttribute("data-is-select-country")&&2==(i=r.split(":")).length&&(r=i[1]),e[o].value=r,$&&n.fireEvent(e[o],"change")}}},et=function(t){t.target.type="date",t.target.focus()},it=function(t){isEmptyLadiPage(t.target.value)&&(t.target.type="text")};for(Z=0;Z<c.length;Z++){c[Z].onsubmit=W;for(var at=n.findAncestor(c[Z],"ladi-element"),nt=c[Z].getElementsByClassName("ladi-button"),ot=0;ot<nt.length;ot++){var rt=c[Z].getElementsByClassName("ladi-button")[ot];if(!isEmptyLadiPage(rt)){var ct=n.findAncestor(rt,"ladi-element");isEmptyLadiPage(at)||isEmptyLadiPage(n.runtime.eventData[at.id])||!n.runtime.eventData[at.id]["option.is_add_to_cart"]?ct.addEventListener("click",V):(ct.setAttribute("data-click",!1),ct.addEventListener("click",Q))}}var dt=c[Z].querySelector('[data-is-select-country="true"][name="country"]');if(!isEmptyLadiPage(dt)&&"true"==dt.getAttribute("data-no-ward")){var st=c[Z].querySelector('[data-is-select-country="true"][name="ward"]');isEmptyLadiPage(st)||st.removeAttribute("required")}for(var ut=c[Z].querySelectorAll('input[data-type="date"]'),pt=0;pt<ut.length;pt++)isEmptyLadiPage(ut[pt].getAttribute("placeholder"))||(ut[pt].setAttribute("data-event",!0),n.runtime.isDesktop||n.runtime.isBrowserDesktop?(ut[pt].setAttribute("type","text"),ut[pt].addEventListener("focus",et),ut[pt].addEventListener("blur",it)):ut[pt].value=(new Date).toISOString().substr(0,10));var mt=c[Z].querySelectorAll("[tabindex]"),lt=0,_t=0;for(pt=0;pt<mt.length;pt++)(_t=parseInt(mt[pt].getAttribute("tabindex"))||0)>lt&&(lt=_t),mt[pt].setAttribute("tabindex",n.runtime.tabindexForm+_t);for(mt=c[Z].querySelectorAll("[data-tabindex]"),pt=0;pt<mt.length;pt++)(_t=parseInt(mt[pt].getAttribute("data-tabindex"))||0)>lt&&(lt=_t),mt[pt].setAttribute("data-tabindex",n.runtime.tabindexForm+_t);n.runtime.tabindexForm+=lt;for(var gt=0;gt<R.length;gt++){var ft=c[Z].querySelector('.ladi-element .ladi-form-item-container input[name="'+R[gt]+'"]');isEmptyLadiPage(ft)||ft.addEventListener("focusout",X)}}var yt=function(t,e){for($=e,Z=0;Z<c.length;Z++){var i=n.findAncestor(c[Z],"ladi-element");!isEmptyLadiPage(n.runtime.eventData[i.id])&&n.runtime.eventData[i.id]["option.form_auto_complete"]&&t.forEach(tt)}};yt(n.copy(D).except(n.runtime.list_set_value_name_country));LadiPageLocation.push(function(){var t="",e="",i="",a="",o=null,r=function(t,e){var i=String(o[t].name),a=String(o[e].name);try{return i.localeCompare(a)}catch(t){}return i==a?0:i>a?1:-1},d=function(i){var a=window.LadiLocation[e];if(isObjectLadiPage(a)){var n=a.data[i];isEmptyLadiPage(n)||(t+='<option value="'+n.id+":"+n.name+'">'+n.name+"</option>")}},s=function(t){var e=window.LadiLocation[t.target.getAttribute("data-country")];if(isObjectLadiPage(e)){var a=e.data[t.target.value.split(":")[0]];if(i="",!isEmptyLadiPage(a)&&isObjectLadiPage(a.data)){var c=Object.keys(a.data);o=a.data,c.sort(r),c.forEach(function(t){var e=a.data[t];i+='<option value="'+e.id+":"+e.name+'">'+e.name+"</option>"})}var d=n.findAncestor(t.target,"ladi-element");if(!isEmptyLadiPage(d)){var s=d.querySelector('[name="district"]');isEmptyLadiPage(s)||"SELECT"==s.tagName&&(s.setAttribute("data-selected",""),s.innerHTML=s.querySelector("option").outerHTML+i);var u=d.querySelector('[name="ward"]');isEmptyLadiPage(u)||"SELECT"==u.tagName&&(u.setAttribute("data-selected",""),u.innerHTML=u.querySelector("option").outerHTML),LadiPageShopping.push(function(){n.reloadFeeShipping({target:u})})}}},u=function(t){var e=n.findAncestor(t.target,"ladi-element");if(!isEmptyLadiPage(e)){var i=e.querySelector('[name="ward"]');if(!isEmptyLadiPage(i)){a="";var c=e.querySelector('select[name="state"]');if(!isEmptyLadiPage(c)){var d=c.getAttribute("data-selected");if(!isEmptyLadiPage(d)){d=d.split(":")[0];var s=window.LadiLocation[c.getAttribute("data-country")];if(isObjectLadiPage(s)){var u=s.data[d];if(!isEmptyLadiPage(u)&&isObjectLadiPage(u.data)){var p=u.data[t.target.value.split(":")[0]];if(!isEmptyLadiPage(p)){var m=Object.keys(p.data);o=p.data,m.sort(r),m.forEach(function(t){var e=p.data[t];a+='<option value="'+e.id+":"+e.name+'">'+e.name+"</option>"})}}}}}"SELECT"==i.tagName&&(i.setAttribute("data-selected",""),i.innerHTML=i.querySelector("option").outerHTML+a);var l=e.querySelector('[name="district"]');isEmptyLadiPage(l)||"SELECT"!=l.tagName||LadiPageShopping.push(function(){n.reloadFeeShipping({target:i})})}}},p=function(t){var e=n.findAncestor(t.target,"ladi-element");if(!isEmptyLadiPage(e)){var i=e.querySelector('[name="ward"]');isEmptyLadiPage(i)||"SELECT"!=i.tagName||LadiPageShopping.push(function(){n.reloadFeeShipping()})}};for(Z=0;Z<c.length;Z++){var m=c[Z].querySelectorAll('.ladi-element .ladi-form-item-container [name="state"]'),l=0,_=null;for(l=0;l<m.length;l++)if(_=n.findAncestor(m[l],"ladi-element"),!isEmptyLadiPage(_)&&(e=n.runtime.eventData[_.id]["option.input_country"],!isEmptyLadiPage(e)&&(t="",e=e.split(":")[0],isObjectLadiPage(window.LadiLocation[e])))){var g=window.LadiLocation[e].data,f=Object.keys(g);o=g,f.sort(r),isArrayLadiPage(n.runtime.country_state_sort[e])&&(f=f.except(n.runtime.country_state_sort[e]),f=n.runtime.country_state_sort[e].concat(f)),f.forEach(d),m[l].setAttribute("data-country",e),m[l].innerHTML=m[l].querySelector("option").outerHTML+t,m[l].removeEventListener("change",s),m[l].addEventListener("change",s)}var y=c[Z].querySelectorAll('.ladi-element .ladi-form-item-container [name="district"]');for(l=0;l<y.length;l++)y[l].removeEventListener("change",u),y[l].addEventListener("change",u);var h=c[Z].querySelectorAll('.ladi-element .ladi-form-item-container [name="ward"]');for(l=0;l<h.length;l++)h[l].removeEventListener("change",p),h[l].addEventListener("change",p)}}),LadiPageLocation.push(function(){yt(C,!0)}),n.runtime.tmp.buttonAddToCartClick=K},LadiPageScriptV2.prototype.setEventDataFormDynamic=function(t){var e=this,i=function(){var t=e.runtime.tmp.form_data_dynamic;if(isNullLadiPage(t))try{var i=document.getElementById("script_form_data_dynamic");isEmptyLadiPage(i)||(t=JSON.parse(i.innerHTML),t=e.deOptimizeEventData(t,LadiPageScript.const.OPTIMIZE_EVENT_DATA_KEY_LIST,"OPTIMIZE_EVENT_DATA_KEY_LIST"),e.runtime.tmp.form_data_dynamic=t)}catch(t){}return t}();if(isArrayLadiPage(i)&&i.length>0){var a="event_data_"+t;isNullLadiPage(e.runtime.tmp[a])&&isObjectLadiPage(e.runtime.eventData[t])&&(e.runtime.tmp[a]=e.copy(e.runtime.eventData[t]));var n=isObjectLadiPage(e.runtime.tmp[a])?e.copy(e.runtime.tmp[a]):e.runtime.eventData[t],o=!0,r=function(t,e,i){var a=!1;"NOT_CONTAINS"!=e&&"NOT_STARTS_WITH"!=e&&"NOT_ENDS_WITH"!=e&&"!="!=e&&"NOT_IN"!=e||(a=!0);var n=isEmptyLadiPage(i)?"":i;n=(n=isStringLadiPage(n)?n:String(n)).toLowerCase();for(var o=0==i?0:parseFloatLadiPage(i)||null,r=0;r<t.length;r++){var c=isEmptyLadiPage(t[r])?"":t[r];c=(c=isStringLadiPage(c)?c:String(c)).toLowerCase();var d=0==t[r]?0:parseFloatLadiPage(t[r])||null;if("CONTAINS"==e&&-1!=n.indexOf(c)){a=!0;break}if("NOT_CONTAINS"==e&&-1!=n.indexOf(c)){a=!1;break}if("STARTS_WITH"==e&&n.startsWith(c)){a=!0;break}if("NOT_STARTS_WITH"==e&&n.startsWith(c)){a=!1;break}if("ENDS_WITH"==e&&n.endsWith(c)){a=!0;break}if("NOT_ENDS_WITH"==e&&n.endsWith(c)){a=!1;break}if(("="==e||"IN"==e)&&n==c){a=!0;break}if(("!="==e||"NOT_IN"==e)&&n==c){a=!1;break}if(!isEmptyLadiPage(d)&&!isEmptyLadiPage(o)){if(">"==e&&o>d){a=!0;break}if(">="==e&&o>=d){a=!0;break}if("<"==e&&o<d){a=!0;break}if("<="==e&&o<=d){a=!0;break}}}return a},c=function(i){if(o)try{var a=null;"FORM_ITEM"==i.type&&("id"==i.form_item_type&&(a=document.querySelector("#"+t+' > .ladi-form > .ladi-element[id="'+i.form_item_value+'"]')),"name"==i.form_item_type&&(a=document.querySelector("#"+t+' > .ladi-form > .ladi-element [name="'+i.form_item_value+'"]'),a=e.findAncestor(a,"ladi-element")),o=!isEmptyLadiPage(a)&&r(i.value,i.operator,window.ladi(a.id).value())),"FORM"==i.type&&(o=r(i.value,i.operator,t))}catch(t){o=!1}};i.forEach(function(t){isObjectLadiPage(t.form_data)&&(o=!0,isArrayLadiPage(t.conditions)&&t.conditions.forEach(c),o&&(n=e.copy(t.form_data)))}),e.runtime.eventData[t]=n}},LadiPageScriptV2.prototype.setInputOtp=function(){for(var t=this,e=document.querySelectorAll(".ladi-form .ladi-element .ladi-form-otp"),i=function(e,a){var n=t.findAncestor(a,"ladi-form");if(!isEmptyLadiPage(n)&&(n=t.findAncestor(n,"ladi-element"),!isEmptyLadiPage(n))){var o="_otp_time_"+n.id,r=window.ladi(o).get_cookie(),c=t.runtime.tmp["cookie_cache_otp_"+n.id];isEmptyLadiPage(r)&&isObjectLadiPage(c)&&!isEmptyLadiPage(c[o])&&(r=c[o]);var d=(r=parseFloatLadiPage(r)||0)+t.runtime.time_otp-Date.now();d=d<t.runtime.time_otp?d:0,r<=0||d<=0?function(t){t.classList.add("otp-resend"),t.classList.remove("otp-countdown"),t.removeAttribute("data-countdown-time")}(e):(d=Math.ceil(d/1e3),e.classList.remove("otp-resend"),e.classList.add("otp-countdown"),e.setAttribute("data-countdown-time",d),t.runTimeout(function(){i(e,a)},1e3))}},a=function(e){var a=t.findAncestor(e.target,"ladi-form");if(!isEmptyLadiPage(a)&&(a=t.findAncestor(a,"ladi-element"),!isEmptyLadiPage(a))){var n="_otp_time_"+a.id,o=!1,r=t.runtime.tmp["cookie_cache_otp_"+a.id],c=function(){a.removeAttribute("data-start-countdown-otp");var c=new Date;c.setTime(c.getTime()+t.runtime.time_otp),o?(r[n]=Date.now(),t.runtime.tmp["cookie_cache_otp_"+a.id]=r):window.ladi(n).set_cookie(Date.now(),c);var d=t.findAncestor(e.target,"ladi-form-item");t.runTimeout(function(){i(d,e.target)},1)};if("true"!=a.getAttribute("data-start-countdown-otp")){var d=window.ladi(n).get_cookie();isEmptyLadiPage(d)&&isObjectLadiPage(r)&&!isEmptyLadiPage(r[n])&&(d=r[n],o=!0);var s=(d=parseFloatLadiPage(d)||0)+t.runtime.time_otp-Date.now();s=s<t.runtime.time_otp?s:0,(d<=0||s<=0)&&"true"!=e.target.getAttribute("data-click")&&isFunctionLadiPage(t.runtime.func_get_code_otp[a.id])&&(t.removeTimeout(t.runtime.tmp.timeout_is_wait_popup_id),t.runtime.tmp.is_wait_popup=!0,t.showLoadingBlur(),e.target.setAttribute("data-click",!0),t.runtime.func_get_code_otp[a.id](!0,function(i){e.target.removeAttribute("data-click"),t.hideLoadingBlur(),i&&c(),t.runtime.tmp.timeout_is_wait_popup_id=t.runTimeout(function(){delete t.runtime.tmp.is_wait_popup},200)}))}else c()}},n=0;n<e.length;n++){var o=e[n],r=t.findAncestor(o,"ladi-form-item");if(!isEmptyLadiPage(r)){r.classList.add("overflow-hidden");var c=r.getElementsByClassName("button-get-code")[0];isEmptyLadiPage(c)&&((c=document.createElement("div")).className="button-get-code",c.innerHTML=t.const.LANG.GET_CODE_BUTTON_TEXT,c.addEventListener("click",a),r.appendChild(c)),c.classList.add("hide-visibility"),o.style.setProperty("padding-right",c.clientWidth+5+"px"),c.classList.remove("hide-visibility"),i(r,c)}}},LadiPageScriptV2.prototype.setInputFile=function(){for(var t=this,e=document.querySelectorAll(".ladi-form .ladi-element .ladi-form-control-file"),i=function(e){var i=e.target,a=i.getAttribute("data-click-id")||t.randomId();i.setAttribute("data-click-id",a);var n=document.getElementById("ladi-input-file");if(isEmptyLadiPage(n)){(n=document.createElement("input")).id="ladi-input-file";var o=t.findAncestor(i,"ladi-element");!isEmptyLadiPage(o)&&o.classList.contains("accept-all")||n.setAttribute("accept",".jpg, .jpeg, .png, .gif, .svg, .ico, .mp3, .mp4, .ttf, .otf, .woff2, .txt, .doc, .docx, .xls, .xlsx, .pdf"),n.setAttribute("style","position: absolute; top: 0; left: 0; visibility: hidden;"),n.multiple=!0,n.type="file",document.body.appendChild(n)}n.setAttribute("data-file-click-id",a),"true"!=n.getAttribute("data-event")&&(n.setAttribute("data-event",!0),n.addEventListener("change",function(e){!function(e,i,a){if(i.length>t.const.FORM_UPLOAD_FILE_LENGTH)t.showMessage(t.const.LANG.FORM_UPLOAD_FILE_MAX_LENGTH_ERROR,{max_length:t.const.FORM_UPLOAD_FILE_LENGTH});else{for(var n=new FormData,o=0,r=0;r<i.length;r++)o+=i[r].size,n.append("file[]",i[r]);if(o>1024*t.const.FORM_UPLOAD_FILE_SIZE*1024)t.showMessage(t.const.LANG.FORM_UPLOAD_FILE_MAX_SIZE_ERROR,{max_size:t.const.FORM_UPLOAD_FILE_SIZE});else{var c={ladipage_id:t.runtime.ladipage_id,lang:t.runtime.lang};n.append("json_data",JSON.stringify(c)),t.showLoadingBlur(),t.sendRequest("POST",t.const.API_FILE_UPLOAD,n,!0,null,function(i,a,n){if(n.readyState==XMLHttpRequest.DONE){if(t.hideLoadingBlur(),200==a)try{var o=JSON.parse(i);if(200==o.code){var r=[],c=[];return o.data.success.forEach(function(t){r.push(t.name),c.push({id:t._id,path:t.path,name:t.name})}),e.value=r.length>0?"["+r.join(", ")+"]":"",void e.setAttribute("data-path-file",JSON.stringify(c))}if(!isEmptyLadiPage(o.message))return void t.showMessage(o.message)}catch(t){}t.showMessage(t.const.LANG.REQUEST_SEND_ERROR)}}),isFunctionLadiPage(a)&&a()}}}(i=document.querySelector('[data-click-id="'+e.target.getAttribute("data-file-click-id")+'"]'),e.target.files,function(){e.target.value=null})})),n.click()},a=0;a<e.length;a++){var n=e[a];n.readOnly=!0,n.style.setProperty("cursor","pointer"),n.addEventListener("click",i)}},LadiPageScriptV2.prototype.runFormItem=function(t,e,i){var a=this;if("form_item"==e){var n=null,o=null;if((i==a.const.INPUT_TYPE.select||i==a.const.INPUT_TYPE.select_multiple)&&(n=document.getElementById(t),!isEmptyLadiPage(n)))for(var r=n.getElementsByClassName("ladi-form-control"),c=0;c<r.length;c++)r[c].addEventListener("change",function(t){t.target.setAttribute("data-selected",t.target.value)});if(i==a.const.INPUT_TYPE.radio||i==a.const.INPUT_TYPE.checkbox){n=document.getElementById(t);var d=function(t){t.stopPropagation();var e=a.findAncestor(t.target,"ladi-form-checkbox-item");if(!isEmptyLadiPage(e)){if(i==a.const.INPUT_TYPE.radio){var n=a.findAncestor(e,"ladi-form-checkbox");if(!isEmptyLadiPage(n))for(var o=n.querySelectorAll(".ladi-form-checkbox-item span"),r=0;r<o.length;r++)o[r].setAttribute("data-checked",!1)}e.getElementsByTagName("span")[0].setAttribute("data-checked",t.target.checked)}a.runFormItemOtherChange(e)},s=function(t){t.stopPropagation();var e=a.findAncestor(t.target,"ladi-form-checkbox-item");isEmptyLadiPage(e)||e.getElementsByTagName("input")[0].click()};if(!isEmptyLadiPage(n)){o=n.getElementsByClassName("ladi-form-checkbox-item");for(var u=0;u<o.length;u++){var p=o[u].getElementsByTagName("input")[0];o[u].getElementsByTagName("span")[0].addEventListener("click",s),p.addEventListener("change",d)}a.runFormItemOtherChange(o[0])}}}},LadiPageScriptV2.prototype.runFormData=function(t){isFunctionLadiPage(t)&&t()},function(){var t=window.LadiPageFormData||[];window.LadiPageFormData={},window.LadiPageFormData.push=function(t){LadiPageScript.runFormData(t)},t.forEach(function(t){window.LadiPageFormData.push(t)})}();