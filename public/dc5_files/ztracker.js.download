/*! @ztracker --v1.1.29 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ztracker=t():e.ztracker=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>q});var r,n,o="https://log.adtimaserver.vn",i="https://s.zzcdn.me";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===a(i)?i:String(i)),n)}var o,i}!function(e){e[e.BUTTON=1]="BUTTON",e[e.LINK=2]="LINK",e[e.STANDARD=3]="STANDARD"}(r||(r={})),function(e){e.PAGEVIEW="pageview",e.VIEWABLE="viewable",e.CONVERSION="conversion",e.EVENT="event"}(n||(n={}));var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,r=[{key:"docActive",value:function(){var e,t,r={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in r)if(e in document){t=r[e];break}return function(r){return r&&document.addEventListener(t,r),!document[e]}}},{key:"randomNumber",value:function(){return Math.round(Math.random()*Math.pow(10,6)+(new Date).getTime())}},{key:"getParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.URL;e=e.replace(/[\\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=r.exec(t);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):null}},{key:"acceptInspect",value:function(){try{return window.self!==window.top&&["localhost","log.adtimaserver.vn"].filter((function(e){return document.referrer.indexOf(e)>-1})).length>0}catch(e){return!0}}},{key:"isMobile",value:function(){var e=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"getUID",value:function(){return new Promise((function(e){try{var t=w.Cookie.get("adtima_uid");if(t&&!t[1].startsWith("2000"))e(t[1]);else if(window.ZA&&"function"==typeof window.ZA.getVisitorID)window.ZA.getVisitorID((function(t){w.Cookie.set("adtima_uid",t),e(t)}));else{var r="https://za.zdn.vn/v3/za.js?"+Math.floor((new Date).getTime()/864e5);w.Browser.loadScript("zasdk",r).then((function(){}),(function(){return e("")})).catch((function(){return e("")})),document.addEventListener("ZA.onready",(function(){window.ZA.getVisitorID((function(t){w.Cookie.set("adtima_uid",t),e(t)}))}))}}catch(t){e("")}}))}},{key:"loadScript",value:function(e,t){return new Promise((function(r,n){try{document.getElementById(e)&&r(!0);var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.id=e,o.src=t,o.onload=function(){return r(!0)},o.onerror=function(){return n()},document.head.appendChild(o)}catch(e){n()}}))}},{key:"loadStyle",value:function(e,t){var r=document.getElementById(e);r||((r=document.createElement("style")).innerHTML=t,r.id=e,document.head.appendChild(r))}},{key:"elementOrParentIsFixed",value:function(e){var t;if(null!==(t=Array.isArray(e)?e[0]:"string"==typeof e?document.querySelector(e):e))for(;"object"===a(t)&&"body"!==t.nodeName.toLowerCase();){if("fixed"===window.getComputedStyle(t).getPropertyValue("position").toLowerCase())return!0;t=t.parentElement}return!1}},{key:"includeTracking",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.id&&document.getElementById(t.id)){var r,n=document.getElementById(t.id);null!==n&&(null===(r=n.parentElement)||void 0===r||r.removeChild(n))}var o=new URL(e);if(o.searchParams.set("atmrk",Math.random().toString()),"complete"===document.readyState){var i,a=document.getElementById("trackheader");a||((a=document.createElement("div")).id="trackheader",a.setAttribute("style","overflow:hidden;width:0;height:0;padding:0;margin:0;position:relative;"),document.body.appendChild(a));var c=document.createElement("img");c.width=1,c.height=1,c.src=o.href,c.setAttribute("style","border:0;overflow:hidden;position:absolute;width:1px;height:1px;"),Object.keys(t).forEach((function(e){return c.setAttribute(e,t[e])})),null===(i=a)||void 0===i||i.appendChild(c)}else(new Image).src=o.href}},{key:"documentOnReady",value:function(){return new Promise((function(e){"complete"===document.readyState?e(document):document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&e(document)}))}))}},{key:"toJson",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e&&e.length)return JSON.parse(e);throw new Error("Input empty!")}catch(e){return t?[]:{}}}},{key:"parsePixelId",value:function(e){return e&&e.length>15&&/^\d+$/.test(e)?e:null}}],r&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const l=u;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===s(i)?i:String(i)),n)}var o,i}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,r=[{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new Date;n&&1==n?o=new Date(o.getTime()+1e3*r):o.setDate(o.getDate()+r);var i=encodeURIComponent(t)+"; expires="+o.toUTCString()+"; path=/";document.cookie=e+"="+i}},{key:"get",value:function(e){var t=document.cookie.split(";"),r=null;return t.forEach((function(t){var n=t.split("="),o=n[0].replace(/^\s+|\s+$/g,"").trim();("string"==typeof e?o===e:e.test(o))&&n[1]&&(r=[o,decodeURIComponent(n[1].replace(/^\s+|\s+$/g,""))])})),r}}],r&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const p=f;function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===y(i)?i:String(i)),n)}var o,i}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,r=[{key:"enableDebugger",value:function(e){w.Browser.loadScript("eruda","".concat(i,"/ztr/eruda.min.js")).then((function(){document.onreadystatechange=function(){if("complete"===document.readyState){var t=document.createElement("div");t.style.position="relative",t.style.zIndex="999999999",document.body.appendChild(t),e=e||{container:t},window.eruda.init(e)}}}))}},{key:"printLog",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=[].slice.call(t),o="number"==typeof n[0]?n.shift():0,i=[console.log,console.info,console.log,console.error];function a(e,t){var r,n,o=["#0573ff","#1191a6","#b3690e","#b30e0e"];return(e=[].slice.call(e)).unshift((r=o[t||0]||o[0],"display: inline-block; color: ".concat(n||"#fff","; background: ").concat(r,"; padding: 1px 4px; border-radius: 3px;"))),e.unshift("%cAdtimaPixel"),e}i[o].apply(console,a(n,o)),window.zlogs=window.zlogs||[],window.zlogs.push({log:n.join(";")})}}],r&&v(t.prototype,r),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const g=m;var w={Browser:new l,Cookie:new p,Debug:new g};function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function S(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}var I=function(){function e(t){var r=t.pixelId,n=t.query;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"_referrer",document.referrer),S(this,"_query",void 0),S(this,"_pixelId",void 0),this._query=k(k({},n),{},{ver:"1.1.29",ref:this._referrer}),this._pixelId=r}var t,i,a;return t=e,(i=[{key:"addQuery",value:function(e,t){this._query[e]=t}},{key:"query",get:function(){return this._query}},{key:"pixelId",get:function(){return this._pixelId},set:function(e){this._pixelId=e}},{key:"pageView",value:function(){var e,t,r=k({type:n.PAGEVIEW,pId:this._pixelId},this._query);!isNaN(null===(e=window._ztrk)||void 0===e?void 0:e.ready)&&window._ztrk.ready>0&&(r.dur=Date.now()-window._ztrk.ready),w.Browser.includeTracking("".concat(o,"/tracklp?").concat(Object.keys(r).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(r[e]))})).join("&")),{"z2-type":"pv"}),"function"==typeof(null===(t=window.ztrDebug)||void 0===t?void 0:t.postMessage)&&window.ztrDebug.postMessage({type:n.PAGEVIEW,path:"/tracklp",data:r})}},{key:"logEvent",value:function(e){var t,r=e.type,n=e.value,i=e.attrs,a=void 0===i?{}:i,c=k({type:r,value:n,pId:this._pixelId},this._query);w.Browser.includeTracking("".concat(o,"/tracklp?").concat(Object.keys(c).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(c[e]))})).join("&")),a),"function"==typeof(null===(t=window.ztrDebug)||void 0===t?void 0:t.postMessage)&&window.ztrDebug.postMessage({type:r,path:"/tracklp",data:c})}},{key:"logConversion",value:function(e){var t,i=e.eventId,a=e.eventType,c=e.selector,u=e.value,l=void 0===u?"":u,s=e.stdParam,d=e.attrs,f=void 0===d?{}:d;if(this._pixelId){var p=k({pId:this._pixelId,eId:i,et:a,url:this._query.curl,value:l},this._query);if(s&&(p.stdParam=s),c){var y,v=(S(y={},r.BUTTON,"eclck"),S(y,r.LINK,"eurl"),S(y,r.STANDARD,"estd"),y);p[v[a]||"eclck"]=c}var m=w.Browser.getParam("zaclid")||sessionStorage.getItem("_zaclid");m&&(p.zaclid=m),w.Browser.includeTracking("".concat(o,"/ptrck/log?").concat(Object.keys(p).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(p[e]))})).join("&")),f),"function"==typeof(null===(t=window.ztrDebug)||void 0===t?void 0:t.postMessage)&&window.ztrDebug.postMessage({type:n.CONVERSION,path:"/ptrck/log",data:p})}}}])&&E(t.prototype,i),a&&E(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();const P=I;function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function D(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}var N=[/_ladi_trck(.*)/gi],B=document.URL,L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,"_start",Date.now()),D(this,"_timer",void 0),D(this,"_scrollTopPercent",0),D(this,"_conversions",[]),D(this,"tracker",void 0),D(this,"_logs",[]),D(this,"onReady",w.Browser.documentOnReady()),this._timer={},window._ztrk=window._ztrk||{};var t,r=w.Browser.parsePixelId(window._ztrk.pid);!r&&document.currentScript&&(r=w.Browser.getParam("id",null===(t=document.currentScript)||void 0===t?void 0:t.getAttribute("src")),window._ztrk.pid=w.Browser.parsePixelId(r));switch(w.Browser.getParam("_ztrdebug")){case"eruda":w.Debug.enableDebugger();break;case"true":w.Browser.acceptInspect()&&w.Browser.loadScript("ztrdebug","".concat(i,"/ztr/ztrdebug.js"));break;case"ver":alert("[Adtima Pixel] version: 1.1.29")}var n={adtid:w.Browser.getParam("adtid"),curl:B,uid:""};return["utm_ads","adtid"].forEach((function(e){var t=w.Browser.getParam(e);t&&(n[e]=t)})),N.forEach((function(e){var t=w.Cookie.get(e);t&&(n[t[0]],t[1])})),this.tracker=new P({pixelId:r,query:n}),this.tracker.pageView(),this.init(),this}var t,a,c;return t=e,a=[{key:"version",get:function(){return"1.1.29"}},{key:"logs",get:function(){return this._logs}},{key:"init",value:function(){var e=this,t=w.Browser.getParam("zaclid");Promise.all([this.onReady,this.getEvents()]).then((function(r){var n=z(r,2),o=n[0],i=n[1],a=[],c=w.Browser.toJson(sessionStorage.getItem("_eztrk"));Array.isArray(c)?a=c:(!e.tracker.pixelId||c.id===e.tracker.pixelId&&Array.isArray(c.data))&&(a=c.data);var u=[].concat(O(i),O(a.filter((function(e){return!i.find((function(t){return t.id===e.id}))}))));if(sessionStorage.setItem("_eztrk",JSON.stringify({id:e.tracker.pixelId,data:u})),t&&sessionStorage.setItem("_zaclid",t),u.forEach((function(t){t.events.forEach((function(r){e._conversions.push({keys:r.keys,kind:r.kind,cid:t.id})}))})),e.handleViewable(o),e.handleElementEvents(o),window.ztrq=function(){return e.signalsEvents.apply(e,arguments)},Array.isArray(window._ztrk.queue))for(;window._ztrk.queue.length;){var l=window._ztrk.queue.shift();e.signalsEvents.apply(e,O(l))}}))}},{key:"signalsEvents",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.shift();try{switch(n){case"track":this.handleStandardEvent.apply(this,t);break;case"pageview":this.tracker.pageView();break;case"pid":var o=w.Browser.parsePixelId(t.shift());if(!o)throw new Error("Pixel ID invalid!");this.tracker.pixelId=o;break;default:throw new Error("No action found")}}catch(e){w.Debug.printLog(2,e.message||e.stack||e)}}},{key:"getEvents",value:function(){var e=this;return new Promise((function(t){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){if(200===r.status){var e=w.Browser.toJson(r.responseText);if(!e.result&&Array.isArray(e))return void t(e||[])}t([])}},r.onerror=function(){return t([])},r.open("GET","".concat(o,"/ptrck/events?pixelId=").concat(e.tracker.pixelId,"&url=").concat(encodeURIComponent(B)),!0),r.send()}))}},{key:"handleViewable",value:function(e){var t=this,r=e.body,o=e.documentElement,i=Math.max(r.scrollHeight,r.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight),a=i/100*30-window.innerHeight,c=i/100*60-window.innerHeight,u=i/100*90-window.innerHeight,l=function(){var e=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),r=window.getComputedStyle(document.body);"hidden"===r.getPropertyValue("overflow").toLowerCase()||"fixed"===r.getPropertyValue("position").toLowerCase()||(t._scrollTopPercent=e/(i-window.innerHeight)*100),e>u&&!t._timer.viewStart?(t._timer.viewStart=(new Date).getTime(),t.tracker.logEvent({type:n.VIEWABLE,value:"view_area=90;duration=".concat(t._timer.viewStart-t._start),attrs:{"z2-type":"vp-end"}})):e>c&&!t._timer.viewMiddle?(t._timer.viewMiddle=(new Date).getTime(),t.tracker.logEvent({type:n.VIEWABLE,value:"view_area=60;duration=".concat(t._timer.viewMiddle-t._start),attrs:{"z2-type":"vp-mid"}})):e>a&&!t._timer.viewEnd&&(t._timer.viewEnd=(new Date).getTime(),t.tracker.logEvent({type:n.VIEWABLE,value:"view_area=30;duration=".concat(t._timer.viewEnd-t._start),attrs:{"z2-type":"vp-start"}}))};window.addEventListener("scroll",l),l()}},{key:"handleFormEvents",value:function(e){var t=this;e.querySelectorAll("form").forEach((function(e){e.addEventListener("submit",(function(){var r=w.Browser.elementOrParentIsFixed(e);return t.tracker.logEvent({type:n.EVENT,value:"cta=form_submit;view_percent=".concat(t._scrollTopPercent,";popup=").concat(JSON.stringify(r)),attrs:{"z2-type":n.EVENT}}),!0}),!1)}))}},{key:"handleElementEvents",value:function(e){var t=this;this._conversions.forEach((function(n){switch(n.kind){case r.BUTTON:var o=n.keys.split(",").map((function(e){return'[id*="'.concat(e,'"]')})),i=e.querySelectorAll(o.join(","));t._logs.push([o.join(","),i.length]),i.forEach((function(e){e.addEventListener("click",(function(){var r=w.Browser.elementOrParentIsFixed(e);return t.tracker.logConversion({eventId:n.cid,eventType:n.kind,selector:e.getAttribute("id"),value:"view_percent=".concat(t._scrollTopPercent,";popup=").concat(JSON.stringify(r)),attrs:{"z2-type":"convs"}}),!0}),!1)}));break;case r.LINK:var a=n.keys.split(",").filter((function(e){return B.indexOf(e)>-1}));a.length&&t.tracker.logConversion({eventId:n.cid,eventType:n.kind,selector:a.join(","),value:"view_percent=".concat(t._scrollTopPercent),attrs:{"z2-type":"convs"}})}})),e.querySelectorAll("a[href]").forEach((function(e){e.addEventListener("click",(function(){var r=w.Browser.elementOrParentIsFixed(e),o=e.getAttribute("href"),i=o.startsWith("tel:")?"tel":o.startsWith("mailto:")?"mail":"url";return t.tracker.logEvent({type:n.EVENT,value:"cta=".concat(i,";view_percent=").concat(t._scrollTopPercent,";popup=").concat(JSON.stringify(r)),attrs:{"z2-type":n.EVENT}}),!0}),!1)}))}},{key:"handleStandardEvent",value:function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(n.length){var i=n.shift();this._conversions.forEach((function(t){if(t.kind===r.STANDARD){var o=t.keys.split(",").filter((function(e){return e===i}));o.length>0&&e.tracker.logConversion({eventId:t.cid,eventType:t.kind,selector:o.join(","),stdParam:n[0]?JSON.stringify(n[0]):"",attrs:{"z2-type":"stde"}})}}))}}}],a&&A(t.prototype,a),c&&A(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();const q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._ztrk||{};if(!e.ready){window._ztrk=e,e.ready=Date.now();var t=new L,r=t.version,n=t.logs;e.version=r,e.logs=n}}();return t})()));